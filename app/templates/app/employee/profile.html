{% extends 'app/base2.html' %}
{% block content %}

<!-- CONTENT --><main class="content-wrap">
<div class="d-flex justify-content-between mb-3" style="background:#fff;border:1px solid #e5e7eb;padding:10px 15px;border-radius:4px;">
    <div class="page-title">My Profile</div>
    <a href="/employee/dashboard.html"><div class="text-muted">Dashboard</div></a>
</div>

<!-- PROFILE OVERVIEW -->
<div style="background:#ffffff; border-radius:10px; box-shadow:0px 2px 6px rgba(0,0,0,0.08); border:1px solid #e5e7eb; overflow:hidden; margin:20px 0;">
    <!-- Profile Header -->
    <div style="padding:30px; border-bottom:1px solid #e5e7eb;background: linear-gradient(135deg, #0a6d65 0%, #1a7370 100%); color:white;">
        <div style="display:flex; align-items:center; gap:25px; flex-wrap: wrap;">
            <!-- Profile Picture -->
            <div style="position:relative;">
                <div style="width:120px; height:120px; border-radius:50%; background:#f8f9fa; display:flex; align-items:center; justify-content:center; border:4px solid white; box-shadow:0 4px 12px rgba(0,0,0,0.2); overflow: hidden;">
                    {% if employee.image %}
                        <img src="{{ employee.image.url }}" alt="Profile" style="width: 100%; height: 100%; object-fit: cover;">
                    {% else %}
                        <i class="fas fa-user" style="font-size:48px; color:#0a6d65;"></i>
                    {% endif %}
                </div>
                <button onclick="changeProfilePicture()" style="position:absolute; bottom:0; right:0; width:35px; height:35px; background:#28a745; border:2px solid white; border-radius:50%; color:white; cursor:pointer; display:flex; align-items:center; justify-content:center;">
                    <i class="fas fa-camera" style="font-size:12px;"></i>
                </button>
            </div>
            
            <!-- Profile Info -->
            <div style="flex:1; min-width: 250px;">
                <h3 style="margin:0; font-weight:700; font-size:28px;" id="employeeName">{{ employee.first_name }} {{ employee.last_name }}</h3>
                <p style="margin:5px 0; font-size:16px; opacity:0.9;" id="employeeTitle">{{ employee.designation }}</p>
                <p style="margin:5px 0; font-size:14px; opacity:0.8;" id="employeeDepartment">{{ employee.department }}</p>
                <div style="display:flex; gap:15px; margin-top:15px; flex-wrap: wrap;">
                    <div style="background:rgba(255,255,255,0.2); padding:8px 12px; border-radius:20px; font-size:12px;">
                        <i class="fas fa-calendar me-1"></i><span>Joined:</span><span id="joinDate">{{ employee.created_at|date:"F Y" }}</span>
                    </div>
                    <div style="background:rgba(255,255,255,0.2); padding:8px 12px; border-radius:20px; font-size:12px;">
                        <i class="fas fa-id-card me-1"></i><span>ID:</span><span id="employeeId">{{ employee.company_id }}</span>
                    </div>
                    <div style="background:rgba(255,255,255,0.2); padding:8px 12px; border-radius:20px; font-size:12px;">
                        <i class="fas fa-envelope me-1"></i><span>Email:</span><span id="employeeEmail">{{ employee.email }}</span>
                    </div>
                </div>
            </div>
            
            <!-- Status Indicator -->
            <div style="min-width: 200px;">
                <div style="background: rgba(255,255,255,0.1); padding:15px; border-radius:8px; text-align:center; border:1px solid rgba(255,255,255,0.2);">
                    <div style="width:50px; height:50px; border-radius:50%; background: {{ status_color|default:'success' }}; display:flex; align-items:center; justify-content:center; margin:0 auto 10px;">
                        <i class="fas {{ status_icon|default:'fa-check-circle' }}" style="color:white; font-size:20px;"></i>
                    </div>
                    <h6 style="margin:0; font-weight:600;">{{ overall_status|default:'All OK' }}</h6>
                    <small style="opacity:0.8;">Overall Status</small>
                </div>
            </div>
            
            <!-- Edit Profile Button -->
            <div>
                <button onclick="editProfile()" style="background:white; color:#0a6d65; border:none; padding:12px 20px; border-radius:8px; font-weight:600; font-size:14px; box-shadow:0 2px 8px rgba(0,0,0,0.2);">
                    <i class="fas fa-edit me-2"></i><span>Edit Profile</span>
                </button>
            </div>
        </div>
    </div>
    
    <!-- Profile Tabs -->
    <div style="padding:0;">
        <ul class="nav nav-tabs" style="border-bottom:1px solid #e5e7eb; background:#f8f9fa;">
            <li class="nav-item">
                <a class="nav-link active" data-bs-toggle="tab" href="#personalInfo" style="border:none; color:#333; font-weight:600; padding:15px 20px;">
                    <i class="fas fa-user me-2"></i><span>Personal Information</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" href="#workInfo" style="border:none; color:#333; font-weight:600; padding:15px 20px;">
                    <i class="fas fa-briefcase me-2"></i><span>Work Information</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" href="#teamProjects" style="border:none; color:#333; font-weight:600; padding:15px 20px;">
                    <i class="fas fa-users me-2"></i><span>Team & Projects</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" href="#documents" style="border:none; color:#333; font-weight:600; padding:15px 20px;">
                    <i class="fas fa-file-alt me-2"></i><span>Documents</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" href="#settings" style="border:none; color:#333; font-weight:600; padding:15px 20px;">
                    <i class="fas fa-cog me-2"></i><span>Settings</span>
                </a>
            </li>
        </ul>
        
        <!-- Tab Content -->
        <div class="tab-content" style="padding:30px;">
            <!-- Personal Information Tab -->
            <div class="tab-pane fade show active" id="personalInfo">
                <div class="row g-4">
                    <div class="col-md-6">
                        <label class="form-label fw-bold">First Name</label>
                        <input type="text" class="form-control" value="{{ employee.first_name }}" readonly style="background:#f8f9fa; border:1px solid #ddd; border-radius:8px; padding:12px;" />
                    </div>
                    <div class="col-md-6">
                        <label class="form-label fw-bold">Last Name</label>
                        <input type="text" class="form-control" value="{{ employee.last_name }}" readonly style="background:#f8f9fa; border:1px solid #ddd; border-radius:8px; padding:12px;" />
                    </div>
                    <div class="col-md-6">
                        <label class="form-label fw-bold">Contact Number</label>
                        <input type="tel" class="form-control" value="{{ employee.contact_number|default:'N/A' }}" readonly style="background:#f8f9fa; border:1px solid #ddd; border-radius:8px; padding:12px;" />
                    </div>
                    <div class="col-md-6">
                        <label class="form-label fw-bold">Email Address</label>
                        <input type="email" class="form-control" value="{{ employee.email }}" readonly style="background:#f8f9fa; border:1px solid #ddd; border-radius:8px; padding:12px;" />
                    </div>
                    <div class="col-md-6">
                        <label class="form-label fw-bold">Official Email</label>
                        <input type="email" class="form-control" value="{{ employee.official_email|default:'N/A' }}" readonly style="background:#f8f9fa; border:1px solid #ddd; border-radius:8px; padding:12px;" />
                    </div>
                    <div class="col-md-6">
                        <label class="form-label fw-bold">Employee ID</label>
                        <input type="text" class="form-control" value="{{ employee.company_id }}" readonly style="background:#f8f9fa; border:1px solid #ddd; border-radius:8px; padding:12px;" />
                    </div>
                    <div class="col-12">
                        <label class="form-label fw-bold">Address</label>
                        <textarea class="form-control" rows="3" readonly style="background:#f8f9fa; border:1px solid #ddd; border-radius:8px; padding:12px;">{{ employee.address|default:'N/A' }}</textarea>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label fw-bold">Family Contact</label>
                        <input type="text" class="form-control" value="{{ employee.family_contact_number|default:'N/A' }}" readonly style="background:#f8f9fa; border:1px solid #ddd; border-radius:8px; padding:12px;" />
                    </div>
                    <div class="col-md-6">
                        <label class="form-label fw-bold">Family Relation</label>
                        <input type="text" class="form-control" value="{{ employee.family_relation|default:'N/A' }}" readonly style="background:#f8f9fa; border:1px solid #ddd; border-radius:8px; padding:12px;" />
                    </div>
                </div>
            </div>
            
            <!-- Work Information Tab -->
            <div class="tab-pane fade" id="workInfo">
                <div class="row g-4">
                    <div class="col-md-6">
                        <label class="form-label fw-bold">Employee ID</label>
                        <input type="text" class="form-control" value="{{ employee.company_id }}" readonly style="background:#f8f9fa; border:1px solid #ddd; border-radius:8px; padding:12px;" />
                    </div>
                    <div class="col-md-6">
                        <label class="form-label fw-bold">Department</label>
                        <input type="text" class="form-control" value="{{ employee.department }}" readonly style="background:#f8f9fa; border:1px solid #ddd; border-radius:8px; padding:12px;" />
                    </div>
                    <div class="col-md-6">
                        <label class="form-label fw-bold">Position</label>
                        <input type="text" class="form-control" value="{{ employee.designation }}" readonly style="background:#f8f9fa; border:1px solid #ddd; border-radius:8px; padding:12px;" />
                    </div>
                    <div class="col-md-6">
                        <label class="form-label fw-bold">Package</label>
                        <input type="text" class="form-control" value="₹{{ employee.package }}" readonly style="background:#f8f9fa; border:1px solid #ddd; border-radius:8px; padding:12px;" />
                    </div>
                    <div class="col-md-6">
                        <label class="form-label fw-bold">Contract Years</label>
                        <input type="text" class="form-control" value="{{ employee.contract_years }} Years" readonly style="background:#f8f9fa; border:1px solid #ddd; border-radius:8px; padding:12px;" />
                    </div>
                    <div class="col-md-6">
                        <label class="form-label fw-bold">Contract Start</label>
                        <input type="text" class="form-control" value="{{ employee.contract_start_date|default:'N/A' }}" readonly style="background:#f8f9fa; border:1px solid #ddd; border-radius:8px; padding:12px;" />
                    </div>
                    <div class="col-md-6">
                        <label class="form-label fw-bold">Contract End</label>
                        <input type="text" class="form-control" value="{{ employee.contract_end_date|default:'N/A' }}" readonly style="background:#f8f9fa; border:1px solid #ddd; border-radius:8px; padding:12px;" />
                    </div>
                    <div class="col-md-6">
                        <label class="form-label fw-bold">Account Created</label>
                        <input type="text" class="form-control" value="{{ employee.created_at|date:'F d, Y H:i' }}" readonly style="background:#f8f9fa; border:1px solid #ddd; border-radius:8px; padding:12px;" />
                    </div>
                    <div class="col-12">
                        <label class="form-label fw-bold">Certifications</label>
                        <textarea class="form-control" rows="3" readonly style="background:#f8f9fa; border:1px solid #ddd; border-radius:8px; padding:12px;">{{ employee.certifications|default:'N/A' }}</textarea>
                    </div>
                </div>
            </div>
            
            <!-- Team & Projects Tab -->
            <div class="tab-pane fade" id="teamProjects">
                <!-- Overall Status Indicator -->
                <div class="row g-4 mb-4">
                    <div class="col-12">
                        <div style="border:1px solid #e5e7eb; border-radius:8px; padding:20px; background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);">
                            <div class="d-flex align-items-center justify-content-between">
                                <div class="d-flex align-items-center">
                                    <div style="width:50px; height:50px; border-radius:50%; background: {{ status_color|default:'success' }}; display:flex; align-items:center; justify-content:center; margin-right:15px;">
                                        <i class="fas {{ status_icon|default:'fa-check-circle' }}" style="color:white; font-size:20px;"></i>
                                    </div>
                                    <div>
                                        <h5 class="mb-1" style="color:#333;">Overall Status: {{ overall_status|default:'All OK' }}</h5>
                                        <p class="text-muted mb-0">Employee performance and activity summary</p>
                                    </div>
                                </div>
                                <div class="text-end">
                                    <small class="text-muted">Last Updated: {{ employee.updated_at|date:"M d, Y H:i" }}</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Team Lead Information -->
                <div class="row g-4 mb-4">
                    <div class="col-12">
                        <h6 class="fw-bold mb-3" style="color:#0a6d65;"><i class="fas fa-user-tie me-2"></i>Team Lead Information</h6>
                        {% if team_leader_info %}
                        <div class="row g-3">
                            <div class="col-md-6">
                                <div style="border:1px solid #e5e7eb; border-radius:8px; padding:15px; background:#f8f9fa;">
                                    <label class="form-label fw-bold">Team Leader Name</label>
                                    <input type="text" class="form-control" value="{{ team_leader_info.name }}" readonly style="background:white; border:1px solid #ddd; border-radius:6px; padding:8px;" />
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div style="border:1px solid #e5e7eb; border-radius:8px; padding:15px; background:#f8f9fa;">
                                    <label class="form-label fw-bold">Designation</label>
                                    <input type="text" class="form-control" value="{{ team_leader_info.designation }}" readonly style="background:white; border:1px solid #ddd; border-radius:6px; padding:8px;" />
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div style="border:1px solid #e5e7eb; border-radius:8px; padding:15px; background:#f8f9fa;">
                                    <label class="form-label fw-bold">Department</label>
                                    <input type="text" class="form-control" value="{{ team_leader_info.department }}" readonly style="background:white; border:1px solid #ddd; border-radius:6px; padding:8px;" />
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div style="border:1px solid #e5e7eb; border-radius:8px; padding:15px; background:#f8f9fa;">
                                    <label class="form-label fw-bold">Your Role in Team</label>
                                    <input type="text" class="form-control" value="{{ team_leader_info.role }}" readonly style="background:white; border:1px solid #ddd; border-radius:6px; padding:8px;" />
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div style="border:1px solid #e5e7eb; border-radius:8px; padding:15px; background:#f8f9fa;">
                                    <label class="form-label fw-bold">Contact Number</label>
                                    <input type="text" class="form-control" value="{{ team_leader_info.contact_number|default:'N/A' }}" readonly style="background:white; border:1px solid #ddd; border-radius:6px; padding:8px;" />
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div style="border:1px solid #e5e7eb; border-radius:8px; padding:15px; background:#f8f9fa;">
                                    <label class="form-label fw-bold">Email</label>
                                    <input type="email" class="form-control" value="{{ team_leader_info.email }}" readonly style="background:white; border:1px solid #ddd; border-radius:6px; padding:8px;" />
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div style="border:1px solid #e5e7eb; border-radius:8px; padding:15px; background:#f8f9fa;">
                                    <label class="form-label fw-bold">Assignment Date</label>
                                    <input type="text" class="form-control" value="{{ team_leader_info.assignment_date|default:'N/A' }}" readonly style="background:white; border:1px solid #ddd; border-radius:6px; padding:8px;" />
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div style="border:1px solid #e5e7eb; border-radius:8px; padding:15px; background:#f8f9fa;">
                                    <label class="form-label fw-bold">TL Experience</label>
                                    <input type="text" class="form-control" value="{{ team_leader_info.experience_years }} Years" readonly style="background:white; border:1px solid #ddd; border-radius:6px; padding:8px;" />
                                </div>
                            </div>
                        </div>
                        {% else %}
                        <div class="text-center py-4" style="background:#f8f9fa; border-radius:8px; border:1px dashed #dee2e6;">
                            <i class="fas fa-user-slash" style="font-size:48px; color:#6c757d; margin-bottom:10px;"></i>
                            <p class="text-muted mb-0">No team leader assigned yet</p>
                        </div>
                        {% endif %}
                    </div>
                </div>
                
                <!-- Project Details -->
                <div class="row g-4 mb-4">
                    <div class="col-12">
                        <h6 class="fw-bold mb-3" style="color:#0a6d65;"><i class="fas fa-project-diagram me-2"></i>Project Details</h6>
                        {% if projects_info %}
                        <div class="row g-3">
                            {% for project in projects_info %}
                            <div class="col-lg-6 col-md-12">
                                <div style="border:1px solid #e5e7eb; border-radius:8px; padding:20px; background:{% if project.status == 'Active' %}#f0f9ff{% else %}#f8f9fa{% endif %}; border-left:4px solid {% if project.status == 'Active' %}#0d6efd{% else %}#6c757d{% endif %};">
                                    <div class="d-flex justify-content-between align-items-start mb-2">
                                        <h6 class="fw-bold mb-0" style="color:#333;">{{ project.project_name }}</h6>
                                        <span class="badge {% if project.status == 'Active' %}bg-primary{% else %}bg-secondary{% endif %}">{{ project.status }}</span>
                                    </div>
                                    <p class="text-muted small mb-2">Code: {{ project.project_code }}</p>
                                    <p class="mb-3" style="font-size:14px;">{{ project.description|truncatechars:100 }}</p>
                                    <div class="row g-2 mb-3">
                                        <div class="col-6">
                                            <small class="text-muted d-block">Priority</small>
                                            <span class="badge {% if project.priority == 'High' %}bg-danger{% elif project.priority == 'Medium' %}bg-warning{% else %}bg-info{% endif %}">{{ project.priority }}</span>
                                        </div>
                                        <div class="col-6">
                                            <small class="text-muted d-block">Team Leader</small>
                                            <span class="text-dark">{{ project.team_leader }}</span>
                                        </div>
                                    </div>
                                    <div class="row g-2">
                                        <div class="col-6">
                                            <small class="text-muted d-block">Start Date</small>
                                            <span class="text-dark">{{ project.start_date }}</span>
                                        </div>
                                        <div class="col-6">
                                            <small class="text-muted d-block">End Date</small>
                                            <span class="text-dark">{{ project.end_date }}{% if project.days_remaining %} ({{ project.days_remaining }} days left){% endif %}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                        {% else %}
                        <div class="text-center py-4" style="background:#f8f9fa; border-radius:8px; border:1px dashed #dee2e6;">
                            <i class="fas fa-folder-open" style="font-size:48px; color:#6c757d; margin-bottom:10px;"></i>
                            <p class="text-muted mb-0">No projects assigned</p>
                        </div>
                        {% endif %}
                    </div>
                </div>
                
                <!-- Tasks & Deadlines -->
                <div class="row g-4 mb-4">
                    <div class="col-12">
                        <h6 class="fw-bold mb-3" style="color:#0a6d65;"><i class="fas fa-tasks me-2"></i>Tasks & Deadlines</h6>
                        {% if tasks_info %}
                        <div class="table-responsive">
                            <table class="table table-hover" style="border-radius:8px; overflow:hidden; border:1px solid #dee2e6;">
                                <thead style="background:#0a6d65; color:white;">
                                    <tr>
                                        <th>Task Name</th>
                                        <th>Project</th>
                                        <th>Priority</th>
                                        <th>Status</th>
                                        <th>Due Date</th>
                                        <th>Progress</th>
                                        <th>Days Left</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for task in tasks_info %}
                                    <tr style="{% if task.days_until_due is not none and task.days_until_due < 0 %}background-color:#fff5f5{% elif task.days_until_due is not none and task.days_until_due <= 3 %}background-color:#fffbf0{% endif %}">
                                        <td>
                                            <strong>{{ task.title|truncatechars:30 }}</strong>
                                            <br><small class="text-muted">{{ task.description|truncatechars:50 }}</small>
                                        </td>
                                        <td>{{ task.project_name|truncatechars:20 }}</td>
                                        <td><span class="badge {% if task.priority == 'High' %}bg-danger{% elif task.priority == 'Medium' %}bg-warning{% else %}bg-info{% endif %}">{{ task.priority }}</span></td>
                                        <td><span class="badge {% if task.task_status == 'completed' %}bg-success{% elif task.task_status == 'in_progress' %}bg-primary{% elif task.task_status == 'in_review' %}bg-warning{% else %}bg-secondary{% endif %}">{{ task.task_status|title }}</span></td>
                                        <td>{{ task.due_date|date:"M d, Y" }}</td>
                                        <td>
                                            <div class="progress" style="height:20px;">
                                                <div class="progress-bar" style="width: {{ task.progress_percentage }}%">{{ task.progress_percentage }}%</div>
                                            </div>
                                        </td>
                                        <td>
                                            {% if task.days_until_due is not none %}
                                            <span class="{% if task.days_until_due < 0 %}text-danger{% elif task.days_until_due <= 3 %}text-warning{% else %}text-success{% endif %}">
                                                {% if task.days_until_due < 0 %}Overdue{% else %}{{ task.days_until_due }} days{% endif %}
                                            </span>
                                            {% else %}N/A{% endif %}
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                        {% else %}
                        <div class="text-center py-4" style="background:#f8f9fa; border-radius:8px; border:1px dashed #dee2e6;">
                            <i class="fas fa-tasks" style="font-size:48px; color:#6c757d; margin-bottom:10px;"></i>
                            <p class="text-muted mb-0">No tasks assigned</p>
                        </div>
                        {% endif %}
                    </div>
                </div>
                
                <!-- Summary Statistics -->
                <div class="row g-4">
                    <div class="col-md-4">
                        <div style="border:1px solid #e5e7eb; border-radius:8px; padding:20px; text-align:center; background:linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);">
                            <i class="fas fa-chart-pie" style="font-size:32px; color:#1976d2; margin-bottom:10px;"></i>
                            <h6 class="fw-bold mb-2">Attendance Summary</h6>
                            <div class="row g-2">
                                <div class="col-4">
                                    <div class="text-success"><strong>{{ attendance_summary.present_days|default:0 }}</strong><br><small>Present</small></div>
                                </div>
                                <div class="col-4">
                                    <div class="text-warning"><strong>{{ attendance_summary.half_days|default:0 }}</strong><br><small>Half Day</small></div>
                                </div>
                                <div class="col-4">
                                    <div class="text-danger"><strong>{{ attendance_summary.absent_days|default:0 }}</strong><br><small>Absent</small></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div style="border:1px solid #e5e7eb; border-radius:8px; padding:20px; text-align:center; background:linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%);">
                            <i class="fas fa-tasks" style="font-size:32px; color:#7b1fa2; margin-bottom:10px;"></i>
                            <h6 class="fw-bold mb-2">Task Summary</h6>
                            <div class="row g-2">
                                <div class="col-6">
                                    <div class="text-primary"><strong>{{ task_summary.pending_tasks|default:0 }}</strong><br><small>Pending</small></div>
                                </div>
                                <div class="col-6">
                                    <div class="text-success"><strong>{{ task_summary.completed_tasks|default:0 }}</strong><br><small>Completed</small></div>
                                </div>
                            </div>
                            <div class="mt-2">
                                {% if task_summary.overdue_tasks > 0 %}
                                <span class="badge bg-danger">{{ task_summary.overdue_tasks }} Overdue</span>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div style="border:1px solid #e5e7eb; border-radius:8px; padding:20px; text-align:center; background:linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%);">
                            <i class="fas fa-project-diagram" style="font-size:32px; color:#388e3c; margin-bottom:10px;"></i>
                            <h6 class="fw-bold mb-2">Project Summary</h6>
                            <div class="row g-2">
                                <div class="col-6">
                                    <div class="text-primary"><strong>{{ project_summary.active_projects|default:0 }}</strong><br><small>Active</small></div>
                                </div>
                                <div class="col-6">
                                    <div class="text-secondary"><strong>{{ project_summary.completed_projects|default:0 }}</strong><br><small>Completed</small></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Documents Tab -->
            <div class="tab-pane fade" id="documents">
                <div class="row g-4">
                    <div class="col-12">
                        <h6 class="fw-bold mb-3">Uploaded Documents</h6>
                        <div class="row g-3">
                            <!-- Document Item -->
                            <div class="col-md-6 col-lg-4">
                                <div style="border:1px solid #e5e7eb; border-radius:8px; padding:20px; text-align:center; background:#f8f9fa;">
                                    <i class="fas fa-file-pdf" style="font-size:48px; color:#dc3545; margin-bottom:10px;"></i>
                                    <div style="font-weight:600; margin-bottom:5px;">Resume</div>
                                    <div style="font-size:12px; color:#666; margin-bottom:15px;">john_doe_resume.pdf</div>
                                    <div style="display:flex; gap:8px; justify-content:center;">
                                        <button class="btn btn-sm btn-outline-primary"><i class="fas fa-eye"></i></button>
                                        <button class="btn btn-sm btn-outline-success"><i class="fas fa-download"></i></button>
                                        <button class="btn btn-sm btn-outline-danger"><i class="fas fa-trash"></i></button>
                                    </div>
                                </div>
                            </div>
                            <!-- Document Item -->
                            <div class="col-md-6 col-lg-4">
                                <div style="border:1px solid #e5e7eb; border-radius:8px; padding:20px; text-align:center; background:#f8f9fa;">
                                    <i class="fas fa-file-image" style="font-size:48px; color:#28a745; margin-bottom:10px;"></i>
                                    <div style="font-weight:600; margin-bottom:5px;">ID Proof</div>
                                    <div style="font-size:12px; color:#666; margin-bottom:15px;">government_id.jpg</div>
                                    <div style="display:flex; gap:8px; justify-content:center;">
                                        <button class="btn btn-sm btn-outline-primary"><i class="fas fa-eye"></i></button>
                                        <button class="btn btn-sm btn-outline-success"><i class="fas fa-download"></i></button>
                                        <button class="btn btn-sm btn-outline-danger"><i class="fas fa-trash"></i></button>
                                    </div>
                                </div>
                            </div>
                            <!-- Document Item -->
                            <div class="col-md-6 col-lg-4">
                                <div style="border:1px solid #e5e7eb; border-radius:8px; padding:20px; text-align:center; background:#f8f9fa;">
                                    <i class="fas fa-certificate" style="font-size:48px; color:#0a6d65; margin-bottom:10px;"></i>
                                    <div style="font-weight:600; margin-bottom:5px;">Certificates</div>
                                    <div style="font-size:12px; color:#666; margin-bottom:15px;">certificates.zip</div>
                                    <div style="display:flex; gap:8px; justify-content:center;">
                                        <button class="btn btn-sm btn-outline-primary"><i class="fas fa-eye"></i></button>
                                        <button class="btn btn-sm btn-outline-success"><i class="fas fa-download"></i></button>
                                        <button class="btn btn-sm btn-outline-danger"><i class="fas fa-trash"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12">
                        <hr style="margin:30px 0;">
                        <h6 class="fw-bold mb-3">Upload New Document</h6>
                        <div style="border:2px dashed #0a6d65; border-radius:8px; padding:40px; text-align:center; background:#f8fffe;">
                            <i class="fas fa-cloud-upload-alt" style="font-size:48px; color:#0a6d65; margin-bottom:15px;"></i>
                            <div style="font-weight:600; margin-bottom:10px;">Drag and drop files here, or click to select</div>
                            <div style="font-size:12px; color:#666; margin-bottom:20px;">Supported formats: PDF, JPG, PNG, DOC (Max 5MB)</div>
                            <button class="btn btn-outline-primary" onclick="document.getElementById('fileUpload').click()">
                                <i class="fas fa-folder-open me-2"></i><span>Browse Files</span>
                            </button>
                            <input type="file" id="fileUpload" multiple style="display:none;" accept=".pdf,.jpg,.jpeg,.png,.doc,.docx" />
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Settings Tab -->
            <div class="tab-pane fade" id="settings">
                <div class="row g-4">
                    <div class="col-12">
                        <h6 class="fw-bold mb-3">Account Settings</h6>
                        <!-- Change Password -->
                        <div style="border:1px solid #e5e7eb; border-radius:8px; padding:20px; margin-bottom:20px;">
                            <h6 class="fw-bold mb-3" style="color:#333;">Change Password</h6>
                            <div class="row g-3">
                                <div class="col-md-4">
                                    <label class="form-label">Current Password</label>
                                    <input type="password" class="form-control" placeholder="••••••••" />
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">New Password</label>
                                    <input type="password" class="form-control" placeholder="••••••••" />
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">Confirm Password</label>
                                    <input type="password" class="form-control" placeholder="••••••••" />
                                </div>
                            </div>
                            <div class="mt-3">
                                <button class="btn btn-outline-primary">
                                    <i class="fas fa-key me-2"></i><span>Update Password</span>
                                </button>
                            </div>
                        </div>
                        <!-- Notification Settings -->
                        <div style="border:1px solid #e5e7eb; border-radius:8px; padding:20px; margin-bottom:20px;">
                            <h6 class="fw-bold mb-3" style="color:#333;">Notification Settings</h6>
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="emailNotifications" checked>
                                        <label class="form-check-label" for="emailNotifications">Email Notifications</label>
                                    </div>
                                    <small class="text-muted">Receive notifications via email</small>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="smsNotifications">
                                        <label class="form-check-label" for="smsNotifications">SMS Notifications</label>
                                    </div>
                                    <small class="text-muted">Receive notifications via SMS</small>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="leaveReminders" checked>
                                        <label class="form-check-label" for="leaveReminders">Leave Reminders</label>
                                    </div>
                                    <small class="text-muted">Get reminders about leave requests</small>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="payrollUpdates" checked>
                                        <label class="form-check-label" for="payrollUpdates">Payroll Updates</label>
                                    </div>
                                    <small class="text-muted">Receive payroll and salary updates</small>
                                </div>
                            </div>
                        </div>
                        <!-- Privacy Settings -->
                        <div style="border:1px solid #e5e7eb; border-radius:8px; padding:20px; margin-bottom:20px;">
                            <h6 class="fw-bold mb-3" style="color:#333;">Privacy Settings</h6>
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="profileVisibility" checked>
                                        <label class="form-check-label" for="profileVisibility">Profile Visibility</label>
                                    </div>
                                    <small class="text-muted">Allow others to view your profile</small>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="activityStatus">
                                        <label class="form-check-label" for="activityStatus">Show Activity Status</label>
                                    </div>
                                    <small class="text-muted">Show when you're online</small>
                                </div>
                            </div>
                        </div>
                        <!-- Save Settings Button -->
                        <div class="text-end">
                            <button class="btn btn-success">
                                <i class="fas fa-save me-2"></i><span>Save Settings</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</main>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
// Change profile picture
function changeProfilePicture() {
    const input = document.createElement('input');
    input.type = 'file';
    input.accept = 'image/*';
    input.onchange = function(event) {
        const file = event.target.files[0];
        if (file) {
            // In real implementation, this would upload the file and update the profile picture
            alert('Profile picture updated successfully!');
        }
    };
    input.click();
}

// Edit profile
function editProfile() {
    // Remove readonly attribute from all inputs to enable editing
    const readonlyInputs = document.querySelectorAll('input[readonly], textarea[readonly], select[readonly]');
    readonlyInputs.forEach(input => {
        input.removeAttribute('readonly');
        input.style.backgroundColor = '#fff';
    });

    // Change edit button to save button
    const editButton = document.querySelector('button[onclick="editProfile()"]');
    editButton.innerHTML = '<i class="fas fa-save me-2"></i><span>Save Profile</span>';
    editButton.onclick = saveProfile;
}

// Save profile
function saveProfile() {
    if (confirm('Are you sure you want to save the changes?')) {
        // Add readonly attribute back to all inputs
        const editableInputs = document.querySelectorAll('input:not([readonly]), textarea:not([readonly]), select:not([readonly])');
        editableInputs.forEach(input => {
            input.setAttribute('readonly', 'readonly');
            input.style.backgroundColor = '#f8f9fa';
        });

        // Change save button back to edit button
        const saveButton = document.querySelector('button[onclick="saveProfile()"]');
        saveButton.innerHTML = '<i class="fas fa-edit me-2"></i><span>Edit Profile</span>';
        saveButton.onclick = editProfile;

        alert('Profile updated successfully!');
    }
}

// File upload handling
document.getElementById('fileUpload')?.addEventListener('change', function(event) {
    const files = event.target.files;
    if (files.length > 0) {
        alert(`${files.length} file(s) selected for upload. In a real implementation, these would be uploaded to the server.`);
    }
});

// Initialize tooltips and other Bootstrap components
document.addEventListener('DOMContentLoaded', function() {
    // Initialize Bootstrap components if needed
    var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
    var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl);
    });
});
</script>

{% endblock %}
